define(["jquery","bootstrap","bootstrap-sweetalert","bootstrap-toastr","jquery-slimscroll","jquery-blockui"],function(n,t,i,r){var u=n,f=function(){var s=!1,t=!1,o=!1,h=!1,c=[],e="/assets/",y="global/img/",p="global/plugins/",ot="global/css/",w={blue:"#89C4F4",red:"#F3565D",green:"#1bbc9b",purple:"#9b59b6",grey:"#95a5a6",yellow:"#F8CB00"},st=function(){u("body").css("direction")==="rtl"&&(s=!0);t=!!navigator.userAgent.match(/MSIE 8.0/);o=!!navigator.userAgent.match(/MSIE 9.0/);h=!!navigator.userAgent.match(/MSIE 10.0/);h&&u("html").addClass("ie10");(h||o||t)&&u("html").addClass("ie")},l=function(){for(var t,n=0;n<c.length;n++)t=c[n],t.call()},ht=function(){var i=u(window).width(),n,r;t?u(window).resize(function(){r!==document.documentElement.clientHeight&&(n&&clearTimeout(n),n=setTimeout(function(){l()},50),r=document.documentElement.clientHeight)}):u(window).resize(function(){u(window).width()!==i&&(i=u(window).width(),n&&clearTimeout(n),n=setTimeout(function(){l()},50))})},ct=function(){u("body").on("click",".portlet > .portlet-title > .tools > a.remove",function(n){n.preventDefault();var t=u(this).closest(".portlet");u("body").hasClass("page-portlet-fullscreen")&&u("body").removeClass("page-portlet-fullscreen");t.find(".portlet-title .fullscreen").tooltip("destroy");t.find(".portlet-title > .tools > .reload").tooltip("destroy");t.find(".portlet-title > .tools > .remove").tooltip("destroy");t.find(".portlet-title > .tools > .config").tooltip("destroy");t.find(".portlet-title > .tools > .collapse, .portlet > .portlet-title > .tools > .expand").tooltip("destroy");t.remove()});u("body").on("click",".portlet > .portlet-title .fullscreen",function(n){var t,i;n.preventDefault();t=u(this).closest(".portlet");t.hasClass("portlet-fullscreen")?(u(this).removeClass("on"),t.removeClass("portlet-fullscreen"),u("body").removeClass("page-portlet-fullscreen"),t.children(".portlet-body").css("height","auto")):(i=f.getViewPort().height-t.children(".portlet-title").outerHeight()-parseInt(t.children(".portlet-body").css("padding-top"))-parseInt(t.children(".portlet-body").css("padding-bottom")),u(this).addClass("on"),t.addClass("portlet-fullscreen"),u("body").addClass("page-portlet-fullscreen"),t.children(".portlet-body").css("height",i))});u("body").on("click",".portlet > .portlet-title > .tools > a.reload",function(n){n.preventDefault();var i=u(this).closest(".portlet"),t=i.children(".portlet-body"),r=i.attr("data-url"),e=i.attr("data-error-display");r?(f.blockUI({target:t,animate:!0,overlayColor:"none"}),u.ajax({type:"GET",cache:!1,url:r,dataType:"html",success:function(n){f.unblockUI(t);t.html(n);i.trigger("portlet.onload");f.initAjax()},error:function(){f.unblockUI(t);f.showToastr("error","加载内容出现错误。请检查您的连接,再试一次！")}})):(f.blockUI({target:t,animate:!0,overlayColor:"none"}),window.setTimeout(function(){f.unblockUI(t)},1e3))});u('.portlet .portlet-title a.reload[data-load="true"]').click();u("body").on("click",".portlet > .portlet-title > .tools > .collapse, .portlet .portlet-title > .tools > .expand",function(n){n.preventDefault();var t=u(this).closest(".portlet").children(".portlet-body");u(this).hasClass("collapse")?(u(this).removeClass("collapse").addClass("expand"),t.slideUp(200)):(u(this).removeClass("expand").addClass("collapse"),t.slideDown(200))})},lt=function(){var t,n,i,f,e,r;u("body").on("click",".md-checkbox > label, .md-radio > label",function(){var i=u(this),n=u(this).children("span:first-child"),t;n.addClass("inc");t=n.clone(!0);n.before(t);u("."+n.attr("class")+":last",i).remove()});if(u("body").hasClass("page-md"))u("body").on("click","a.btn, button.btn, input.btn, label.btn",function(r){t=u(this);t.find(".md-click-circle").length===0&&t.prepend("<span class='md-click-circle'><\/span>");n=t.find(".md-click-circle");n.removeClass("md-click-animate");n.height()||n.width()||(i=Math.max(t.outerWidth(),t.outerHeight()),n.css({height:i,width:i}));f=r.pageX-t.offset().left-n.width()/2;e=r.pageY-t.offset().top-n.height()/2;n.css({top:e+"px",left:f+"px"}).addClass("md-click-animate");setTimeout(function(){n.remove()},1e3)});r=function(n){n.val()!==""?n.addClass("edited"):n.removeClass("edited")};u("body").on("keydown",".form-md-floating-label .form-control",function(){r(u(this))});u("body").on("blur",".form-md-floating-label .form-control",function(){r(u(this))});u(".form-md-floating-label .form-control").each(function(){u(this).val().length>0&&u(this).addClass("edited")})},b=function(){u().iCheck&&u(".icheck").each(function(){var n=u(this).attr("data-checkbox")?u(this).attr("data-checkbox"):"icheckbox_minimal-grey",t=u(this).attr("data-radio")?u(this).attr("data-radio"):"iradio_minimal-grey";n.indexOf("_line")>-1||t.indexOf("_line")>-1?u(this).iCheck({checkboxClass:n,radioClass:t,insert:'<div class="icheck_line-icon"><\/div>'+u(this).attr("data-label")}):u(this).iCheck({checkboxClass:n,radioClass:t})})},k=function(){u().bootstrapSwitch&&u(".make-switch").bootstrapSwitch()},d=function(){u().confirmation&&u("[data-toggle=confirmation]").confirmation({btnOkClass:"btn btn-sm btn-success",btnCancelClass:"btn btn-sm btn-danger"})},g=function(){u("body").on("shown.bs.collapse",".accordion.scrollable",function(n){f.scrollTo(u(n.target))})},at=function(){if(encodeURI(location.hash)){var n=encodeURI(location.hash.substr(1));u('a[href="#'+n+'"]').parents(".tab-pane:hidden").each(function(){var n=u(this).attr("id");u('a[href="#'+n+'"]').click()});u('a[href="#'+n+'"]').click()}u().tabdrop&&u(".tabbable-tabdrop .nav-pills, .tabbable-tabdrop .nav-tabs").tabdrop({text:'<i class="fa fa-ellipsis-v"><\/i>&nbsp;<i class="fa fa-angle-down"><\/i>'})},vt=function(){u("body").on("hide.bs.modal",function(){u(".modal:visible").size()>1&&u("html").hasClass("modal-open")===!1?u("html").addClass("modal-open"):u(".modal:visible").size()<=1&&u("html").removeClass("modal-open")});u("body").on("show.bs.modal",".modal",function(){u(this).hasClass("modal-scroll")&&u("body").addClass("modal-open-noscroll");var n=window.parent.document.body.scrollTop;(n===0||n===null||n===undefined)&&(n=30);u(".modal-dialog").css({"margin-top":n+"px"})});u("body").on("hidden.bs.modal",".modal",function(){u("body").removeClass("modal-open-noscroll")});u("body").on("hidden.bs.modal",".modal:not(.modal-cached)",function(){u(this).removeData("bs.modal")})},nt=function(){u(".tooltips").tooltip();u(".portlet > .portlet-title .fullscreen").tooltip({trigger:"hover",container:"body",title:"Fullscreen"});u(".portlet > .portlet-title > .tools > .reload").tooltip({trigger:"hover",container:"body",title:"Reload"});u(".portlet > .portlet-title > .tools > .remove").tooltip({trigger:"hover",container:"body",title:"Remove"});u(".portlet > .portlet-title > .tools > .config").tooltip({trigger:"hover",container:"body",title:"Settings"});u(".portlet > .portlet-title > .tools > .collapse, .portlet > .portlet-title > .tools > .expand").tooltip({trigger:"hover",container:"body",title:"Collapse/Expand"})},tt=function(){u("body").on("click",".dropdown-menu.hold-on-click",function(n){n.stopPropagation()})},yt=function(){u("body").on("click",'[data-close="alert"]',function(n){u(this).parent(".alert").hide();u(this).closest(".note").hide();n.preventDefault()});u("body").on("click",'[data-close="note"]',function(n){u(this).closest(".note").hide();n.preventDefault()});u("body").on("click",'[data-remove="note"]',function(n){u(this).closest(".note").remove();n.preventDefault()})},pt=function(){typeof autosize=="function"&&autosize(document.querySelectorAll("textarea.autosizeme"))},a,it=function(){u(".popovers").popover();u(document).on("click.bs.popover.data-api",function(){a&&a.popover("hide")})},rt=function(){f.initSlimScroll(".scroller")},v=function(){n.fancybox&&u(".fancybox-button").size()>0&&u(".fancybox-button").fancybox({groupAttr:"data-rel",prevEffect:"none",nextEffect:"none",closeBtn:!0,helpers:{title:{type:"inside"}}})},wt=function(){u().counterUp&&u("[data-counter='counterup']").counterUp({delay:10,time:1e3})},bt=function(){(t||o)&&u("input[placeholder]:not(.placeholder-no-fix), textarea[placeholder]:not(.placeholder-no-fix)").each(function(){var n=u(this);n.val()===""&&n.attr("placeholder")!==""&&n.addClass("placeholder").val(n.attr("placeholder"));n.focus(function(){n.val()===n.attr("placeholder")&&n.val("")});n.blur(function(){(n.val()===""||n.val()===n.attr("placeholder"))&&n.val(n.attr("placeholder"))})})},ut=function(){u().select2&&(u.fn.select2.defaults.set("theme","bootstrap"),u(".select2me").select2({placeholder:"请选择...",width:"100%",tags:!0}))},ft=function(){n().datepicker&&u(".date-picker").datepicker({rtl:f.isRTL(),orientation:"left",autoclose:!0,language:"zh-CN",format:"yyyy-mm-dd"});n().datetimepicker&&u(".date-time-picker").datetimepicker({autoclose:!0,isRTL:f.isRTL(),format:"yyyy-mm-dd hh:ii",fontAwesome:!0,pickerPosition:f.isRTL()?"bottom-left":"bottom-right"})},kt=function(){u("[data-auto-height]").each(function(){var n=u(this),i=u("[data-height]",n),t=0,r=n.attr("data-mode"),f=parseInt(n.attr("data-offset")?n.attr("data-offset"):0);i.each(function(){u(this).attr("data-height")==="height"?u(this).css("height",""):u(this).css("min-height","");var n=r==="base-height"?u(this).outerHeight():u(this).outerHeight(!0);n>t&&(t=n)});t=t+f;i.each(function(){u(this).attr("data-height")==="height"?u(this).css("height",t):u(this).css("min-height",t)});n.attr("data-related")&&u(n.attr("data-related")).css("height",n.height())})},dt=function(){u(".table-active > tbody").delegate("tr","click",function(){u(this).addClass("active").siblings().removeClass("active")})},et=function(){u(".table-tree > tbody").delegate(".table-tree-slide","click",function(){var i=u(this).closest("tr").attr("data-id"),t=u(this).find("i");t.hasClass("fa-chevron-down")?t.removeClass("fa-chevron-down").addClass("fa-chevron-up"):t.hasClass("fa-chevron-up")&&t.removeClass("fa-chevron-up").addClass("fa-chevron-down");n(i)});var n=function(t){var i=u(".table-tree > tbody tr[data-parent="+t+"]");i.toggle();i.each(function(){var t=u(this).attr("data-id");n(t)})}};return{init:function(){st();ht();lt();b();k();rt();v();ut();ft();ct();yt();tt();at();nt();it();g();vt();d();pt();wt();dt();et();this.addResizeHandler(kt);bt()},initAjax:function(){b();k();rt();ft();ut();v();tt();nt();it();g();d()},initComponents:function(){this.initAjax()},initTreeTable:function(){et()},setLastPopedPopover:function(n){a=n},addResizeHandler:function(n){c.push(n)},runResizeHandlers:function(){l()},scrollTo:function(n,t){var i=n&&n.size()>0?n.offset().top:0;n&&(u("body").hasClass("page-header-fixed")?i=i-u(".page-header").height():u("body").hasClass("page-header-top-fixed")?i=i-u(".page-header-top").height():u("body").hasClass("page-header-menu-fixed")&&(i=i-u(".page-header-menu").height()),i=i+(t?t:-1*n.height()));u("html,body").animate({scrollTop:i},"slow")},initSlimScroll:function(n){u().slimScroll&&u(n).each(function(){if(!u(this).attr("data-initialized")){var n;n=u(this).attr("data-height")?u(this).attr("data-height"):u(this).css("height");u(this).slimScroll({allowPageScroll:!0,size:"7px",color:u(this).attr("data-handle-color")?u(this).attr("data-handle-color"):"#bbb",wrapperClass:u(this).attr("data-wrapper-class")?u(this).attr("data-wrapper-class"):"slimScrollDiv",railColor:u(this).attr("data-rail-color")?u(this).attr("data-rail-color"):"#eaeaea",position:s?"left":"right",height:n,alwaysVisible:u(this).attr("data-always-visible")==="1"?!0:!1,railVisible:u(this).attr("data-rail-visible")==="1"?!0:!1,disableFadeOut:!0});u(this).attr("data-initialized","1")}})},destroySlimScroll:function(n){u().slimScroll&&u(n).each(function(){var n,t;u(this).attr("data-initialized")==="1"&&(u(this).removeAttr("data-initialized"),u(this).removeAttr("style"),n={},u(this).attr("data-handle-color")&&(n["data-handle-color"]=u(this).attr("data-handle-color")),u(this).attr("data-wrapper-class")&&(n["data-wrapper-class"]=u(this).attr("data-wrapper-class")),u(this).attr("data-rail-color")&&(n["data-rail-color"]=u(this).attr("data-rail-color")),u(this).attr("data-always-visible")&&(n["data-always-visible"]=u(this).attr("data-always-visible")),u(this).attr("data-rail-visible")&&(n["data-rail-visible"]=u(this).attr("data-rail-visible")),u(this).slimScroll({wrapperClass:u(this).attr("data-wrapper-class")?u(this).attr("data-wrapper-class"):"slimScrollDiv",destroy:!0}),t=u(this),u.each(n,function(n,i){t.attr(n,i)}))})},scrollTop:function(){f.scrollTo()},blockUI:function(n){var t,i;n=u.extend(!0,{},n);t="";t=n.animate?'<div class="loading-message '+(n.boxed?"loading-message-boxed":"")+'"><div class="block-spinner-bar"><div class="bounce1"><\/div><div class="bounce2"><\/div><div class="bounce3"><\/div><\/div><\/div>':n.iconOnly?'<div class="loading-message '+(n.boxed?"loading-message-boxed":"")+'"><img src="'+this.getGlobalImgPath()+'loading-spinner-grey.gif" align=""><\/div>':n.textOnly?'<div class="loading-message '+(n.boxed?"loading-message-boxed":"")+'"><span>&nbsp;&nbsp;'+(n.message?n.message:"LOADING...")+"<\/span><\/div>":'<div class="loading-message '+(n.boxed?"loading-message-boxed":"")+'"><img src="'+this.getGlobalImgPath()+'loading-spinner-grey.gif" align=""><span>&nbsp;&nbsp;'+(n.message?n.message:"LOADING...")+"<\/span><\/div>";n.target?(i=u(n.target),i.height()<=u(window).height()&&(n.cenrerY=!0),i.block({message:t,baseZ:n.zIndex?n.zIndex:1e3,centerY:n.cenrerY!==undefined?n.cenrerY:!1,css:{top:"10%",border:"0",padding:"0",backgroundColor:"none"},overlayCSS:{backgroundColor:n.overlayColor?n.overlayColor:"#555",opacity:n.boxed?.05:.1,cursor:"wait"}})):u.blockUI({message:t,baseZ:n.zIndex?n.zIndex:1e3,css:{border:"0",padding:"0",backgroundColor:"none"},overlayCSS:{backgroundColor:n.overlayColor?n.overlayColor:"#555",opacity:n.boxed?.05:.1,cursor:"wait"}})},unblockUI:function(n){n?u(n).unblock({onUnblock:function(){u(n).css("position","");u(n).css("zoom","")}}):u.unblockUI()},startPageLoading:function(n){n&&n.animate?(u(".page-spinner-bar").remove(),u("body").append('<div class="page-spinner-bar"><div class="bounce1"><\/div><div class="bounce2"><\/div><div class="bounce3"><\/div><\/div>')):(u(".page-loading").remove(),u("body").append('<div class="page-loading"><img src="'+this.getGlobalImgPath()+'loading-spinner-grey.gif"/>&nbsp;&nbsp;<span>'+(n&&n.message?n.message:"Loading...")+"<\/span><\/div>"))},stopPageLoading:function(){u(".page-loading, .page-spinner-bar").remove()},alert:function(n){n=u.extend(!0,{container:"",place:"append",type:"success",message:"",close:!0,reset:!0,focus:!0,closeInSeconds:0,icon:""},n);var i=f.getUniqueID("App_alert"),t='<div id="'+i+'" class="custom-alerts alert alert-'+n.type+' fade in">'+(n.close?'<button type="button" class="close" data-dismiss="alert" aria-hidden="true"><\/button>':"")+(n.icon!==""?'<i class="fa-lg fa fa-'+n.icon+'"><\/i>  ':"")+n.message+"<\/div>";return n.reset&&u(".custom-alerts").remove(),n.container?n.place==="append"?u(n.container).append(t):u(n.container).prepend(t):u(".page-fixed-main-content").size()===1?u(".page-fixed-main-content").prepend(t):(u("body").hasClass("page-container-bg-solid")||u("body").hasClass("page-content-white"))&&u(".page-head").size()===0?u(".page-title").after(t):u(".page-bar").size()>0?u(".page-bar").after(t):u(".page-breadcrumb, .breadcrumbs").after(t),n.focus&&f.scrollTo(u("#"+i)),n.closeInSeconds>0&&setTimeout(function(){u("#"+i).remove()},n.closeInSeconds*1e3),i},sweetAlert:function(n){return n=Object.assign({title:"",allowOutsideClick:!0,type:"success",confirmButtonClass:"btn-success"},n),u.Deferred(function(t){i(n,function(n){n?t.resolve():t.reject()})}).promise()},showToastr:function(n,t,i){r.options={closeButton:!0,debug:!1,positionClass:"toast-top-right",onclick:null,showDuration:"1000",hideDuration:"1000",timeOut:"3000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};r[n](t,i)},initFancybox:function(){v()},getActualVal:function(n){return(n=u(n),n.val()===n.attr("placeholder"))?"":n.val()},getURLParameter:function(n){for(var u=window.location.search.substring(1),i,r=u.split("&"),t=0;t<r.length;t++)if(i=r[t].split("="),i[0]===n)return unescape(i[1]);return null},isTouchDevice:function(){try{return document.createEvent("TouchEvent"),!0}catch(n){return!1}},getViewPort:function(){var n=window,t="inner";return"innerWidth"in window||(t="client",n=document.documentElement||document.body),{width:n[t+"Width"],height:n[t+"Height"]}},getUniqueID:function(){return"prefix_"+Math.floor(Math.random()*(new Date).getTime())},isIE8:function(){return t},isIE9:function(){return o},isRTL:function(){return s},getAssetsPath:function(){return e},setAssetsPath:function(n){e=n},setGlobalImgPath:function(n){y=n},getGlobalImgPath:function(){return e+y},setGlobalPluginsPath:function(n){p=n},getGlobalPluginsPath:function(){return e+p},getGlobalCssPath:function(){return e+ot},getBrandColor:function(n){return w[n]?w[n]:""},getResponsiveBreakpoint:function(n){var t={xs:480,sm:768,md:992,lg:1200};return t[n]?t[n]:0}}}();return f});